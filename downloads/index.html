<!doctype html>
<html lang="en">
<head>
    <script src="./js/jquery-3.6.0.min.js"></script>
    <script>
    $( document ).ready(function() {
        $("button").click(function(){
            var data = new FormData();
            data.append('listings','files list');
            $.ajax( {
                url: '../Upload',
                type: 'POST',
                data: data,
                processData: false,
                contentType: false,
                success: function(data) {
                    var response = jQuery.parseJSON(data);
                    if(response.code == "success") {
                        console.log("Success!");
                    } else if(response.code == "failure") {
                        console.log(response.err);
                    }
                    getList(response);

                }
            } );
        });
    });
    $( window ).on( "load", function() {

    });
    function getList(a) {
//        var file_table="";
        var ct = 0;
//        console.log(a);
        for(var b in a["files"]){
            console.log(a["files"][b]+"\n");
            var tmp =a["files"][b];
            var hlink = "<a href=\"https://pdm.pw/fileserv"+tmp+"\">download</a>";
            var file_table="<tr><th>"+tmp+"</th><th>"+
                hlink
                +"</th></tr>";
            $("#filelist").append(file_table);
        }
    }
        
    </script>
    <script>
    
    </script>
</head>
<body>
    <button>HTTP POST request </button>
    <table border=1>
        <thead>
            <tr><th>File</th><th>Download</th></tr>
        </thead>
        <tbody id="filelist">
        </tbody>
    </table>
    
</body>
</html>