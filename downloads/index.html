<!doctype html>
<html lang="en">
<head>
    <script src="./js/jquery-3.6.0.min.js"></script>
    <script>
        $( document ).ready(function() {
            $("button").click(function(){
                var data = new FormData();
                data.append('listings','files list');
                $.ajax( {
                    url: '../Upload',
                    type: 'POST',
                    data: data,
                    processData: false,
                    contentType: false,
                    success: function(data) {
                        var response = jQuery.parseJSON(data);
                        if(response.code == "success") {
                            console.log("Success!");
                        } else if(response.code == "failure") {
                            console.log(response.err);
                        }
                        getList(response);

                    }
                } );
            });
        });
        $( window ).on( "load", function() {
            
        });
        
        
    </script>
    <script>
    function getList(a) {
//            var file_table="<table><tr><th>File</th><th>Download</th></tr>";
            var file_table="";
            var ct = 0;
            for(var b in a["files"]){
//                console.log(b[ct]+"\n");
                file_table=file_table+"<tr><th>"+b[ct]+"</th><th>Download</th></tr>";
            }
        for (const key in a){
          if(a.hasOwnProperty(key)){
            console.log(`${key} : ${a[key]}`)
          }
        }
            $("#filelist").html(file_table+"");

        }
    </script>
</head>
<body>
    <button>HTTP POST request </button>
    <table id="#filelist"><tr><th>File</th><th>Download</th></tr>
    
    </table>
    
</body>
</html>